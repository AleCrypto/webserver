define(["lib/react","lib/clib","components2/graph"],function(e,t,n){var r=e.DOM;return e.createClass({displayName:"Chart",propType:{engine:e.PropTypes.object.isRequired},componentWillMount:function(){var e;window.onresize=function(){window.innerWidth>767?window.innerWidth<1e3?e=Math.floor(window.innerWidth*.58):e=600:e=window.innerWidth*.9,self.graph=new n(e,300)},window.innerWidth>767?window.innerWidth<1e3?e=Math.floor(window.innerWidth*.58):e=600:e=window.innerWidth*.9,this.graph=new n(e,300)},componentWillUnmount:function(){this.mounted=!1},componentDidMount:function(){this.mounted=!0,this.animRequest=window.requestAnimationFrame(this.draw)},draw:function(){if(this.mounted){var e=this.getDOMNode();if(!e.getContext){console.log("No canvas");return}var t=e.getContext("2d");this.graph.setData(t,e,this.props.engine),this.graph.calculatePlotValues(),this.graph.clean(),this.graph.drawGraph(),this.graph.drawAxes(),this.graph.drawGameData(),this.animRequest=window.requestAnimationFrame(this.draw)}},render:function(){return r.canvas({width:this.graph.canvasWidth,height:this.graph.canvasHeight})}})});