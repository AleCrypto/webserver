define(["lib/lodash","lib/events","constants/AppConstants","dispatcher/AppDispatcher"],function(e,t,n,r){var i="change",s="",o=e.extend({},t,{emitChange:function(){this.trigger(i)},addChangeListener:function(e){this.on(i,e)},removeChangeListener:function(e){this.off(i,e)},_setInputText:function(e){s=e},_clearInputText:function(){s=""},getState:function(){return{inputText:s}}});return r.register(function(e){var t=e.action;switch(t.actionType){case n.ActionTypes.SET_CHAT_INPUT_TEXT:o._setInputText(t.text),o.emitChange();return;case n.ActionTypes.SAY_CHAT:o._clearInputText(),o.emitChange();return}return!0}),o});