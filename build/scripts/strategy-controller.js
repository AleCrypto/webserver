define(["strategies","engine-controller","lib/events","lib/lodash"],function(e,t,n,r){var i=function(t){r.extend(this,n),this.engine=t,this.script=e.custom,this.active=!1,this.engineController=null,this.selectedStrategy="custom"};return i.prototype.runStrategy=function(e,n){console.assert(!this.engineController),this.engineController=new t(this.engine,e,n),this.active=!0,this.trigger("change")},i.prototype.stopScript=function(){this.engineController.stop(),this.engineController=null,this.active=!1,this.trigger("change")},i.prototype.updateScript=function(e){this.script=e,this.trigger("change")},i.prototype.selectStrategy=function(t){console.assert(e.hasOwnProperty(t)),this.selectedStrategy=t,this.script=e[t],this.trigger("change")},i.prototype.setActive=function(e){this.active=e,this.trigger("change")},i.prototype.getState=function(){return{active:this.active,script:this.script,selectedStrategy:this.selectedStrategy}},i});